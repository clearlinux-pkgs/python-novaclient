From 9d67d58d291ac72bb7479d072d6927183e0f35ad Mon Sep 17 00:00:00 2001
From: William Douglas <william.douglas@intel.com>
Date: Thu, 1 Oct 2015 14:29:59 -0700
Subject: [PATCH] Allow image ID to passed in directly

Instead of having an image object passed in, allow the image ID to be
passed in as well in case the ID was specified on the commandline
directly and not obtained from a request to nova.
---
 novaclient/v2/servers.py | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

diff --git a/novaclient/v2/servers.py b/novaclient/v2/servers.py
index d21bc5f..2fd670d 100644
--- a/novaclient/v2/servers.py
+++ b/novaclient/v2/servers.py
@@ -420,15 +420,22 @@ class ServerManager(base.BootingManagerWithFind):
               max_count=None, security_groups=None, key_name=None,
               availability_zone=None, block_device_mapping=None,
               block_device_mapping_v2=None, nics=None, scheduler_hints=None,
-              config_drive=None, admin_pass=None, disk_config=None, **kwargs):
+              config_drive=None, admin_pass=None, disk_config=None,
+              image_id=False, **kwargs):
         """
         Create (boot) a new server.
         """
         body = {"server": {
             "name": name,
-            "imageRef": str(base.getid(image)) if image else '',
             "flavorRef": str(base.getid(flavor)),
         }}
+        if image and image_id:
+            image_ref = image
+        elif image:
+            image_ref = str(base.getid(image))
+        else:
+            image_ref = ''
+        body["server"]["imageRef"] = image_ref
         if userdata:
             if hasattr(userdata, 'read'):
                 userdata = userdata.read()
-- 
2.5.0

